# Spring 注解基础

面试中，Spring 注解高频的问题是“常用注解”、“启动类注解”。要理解 Spring 框架，理解注解底层的实现对于理解整个 Spring 框架如何工作是非常重要的基本功。

# `@SpringBootApplication`

首先，如果创建一个 Spring Boot 项目，自动创建的启动类的中将会有一个 `@SpringBootApplication` 注解，表示这个类是 Spring 的启动类：

```java
@SpringBootApplication
public class SpringbootLearnSrcApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootLearnSrcApplication.class, args);
    }

}
```

这个注解是一个复合注解，定义如下：

```java
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(
    excludeFilters = {@Filter(
    type = FilterType.CUSTOM,
    classes = {TypeExcludeFilter.class}
), @Filter(
    type = FilterType.CUSTOM,
    classes = {AutoConfigurationExcludeFilter.class}
)}
)
public @interface SpringBootApplication {
    // 一系列别名设置，详细可以阅读源代码并结合【注解基础】查看细节
}
```

前面四个注解是元注解，后面三个是 Spring 启动注解的核心。

# `@ComponentScan`

先来看源代码：

```java
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE})
@Documented
@Repeatable(ComponentScans.class)
public @interface ComponentScan {
    @AliasFor("basePackages")
    String[] value() default {};

    @AliasFor("value")
    String[] basePackages() default {};

    Class<?>[] basePackageClasses() default {};

    Class<? extends BeanNameGenerator> nameGenerator() default BeanNameGenerator.class;

    Class<? extends ScopeMetadataResolver> scopeResolver() default AnnotationScopeMetadataResolver.class;

    ScopedProxyMode scopedProxy() default ScopedProxyMode.DEFAULT;

    String resourcePattern() default "**/*.class";

    boolean useDefaultFilters() default true;

    Filter[] includeFilters() default {};

    Filter[] excludeFilters() default {};

    boolean lazyInit() default false;

    @Retention(RetentionPolicy.RUNTIME)
    @Target({})
    public @interface Filter {
        FilterType type() default FilterType.ANNOTATION;

        @AliasFor("classes")
        Class<?>[] value() default {};

        @AliasFor("value")
        Class<?>[] classes() default {};

        String[] pattern() default {};
    }
}
```